{"version":3,"file":"static/js/116.c54cd091.chunk.js","mappings":"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","sources":["control/components/dash/weekly_payments.tsx","control/components/dash/vikoba_transactions.tsx","control/pages/index.tsx"],"sourcesContent":["// import {Column} from \"@ant-design/charts\";\nimport {useEffect, useState} from \"react\";\nimport simpleRestProvider from \"../../../api\";\nimport configs from \"../../../configs\";\n\ninterface searchFormData {\n  key: string;\n}\n\ninterface AnalyticsData {\n  day: string;\n  total: number;\n}\n\ninterface Props {}\n\nexport const WeeklyPaymentsDash: React.FC<Props> = (props: Props) => {\n  const [analytics, setAnalytics] = useState<AnalyticsData[]>([]);\n\n  const config = {\n    data: analytics,\n    xField: \"day\",\n    yField: \"total\",\n    columnWidthRatio: 0.8,\n    xAxis: {\n      label: {\n        autoHide: true,\n        autoRotate: false,\n      },\n    },\n    meta: {\n      type: {\n        alias: \"Day of Week\",\n      },\n      sales: {\n        alias: \"Total Payments\",\n      },\n    },\n  };\n\n  const getData = async () => {\n    const {data} = await simpleRestProvider.custom!({\n      url: configs.apiUrl + `/weekly/billing/payments/analytics`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n      console.log(data);\n    if (data) {\n      setAnalytics(data.data);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  return (\n    <>\n      {/* <Column {...config} /> */}\n    </>\n  );\n};\n","// import {Column} from \"@ant-design/charts\";\nimport {useEffect, useState} from \"react\";\nimport simpleRestProvider from \"../../../api\";\nimport configs from \"../../../configs\";\n\ninterface AnalyticsData {\n  day: string;\n  total: number;\n}\n\ninterface Props {}\n\nexport const WeeklyVikobaTransactionsDash: React.FC<Props> = (props: Props) => {\n  const [analytics, setAnalytics] = useState<AnalyticsData[]>([]);\n\n  const config = {\n    data: analytics,\n    xField: \"day\",\n    yField: \"total\",\n    columnWidthRatio: 0.8,\n    xAxis: {\n      label: {\n        autoHide: true,\n        autoRotate: false,\n      },\n    },\n    meta: {\n      type: {\n        alias: \"Day of Week\",\n      },\n      sales: {\n        alias: \"Total Payments\",\n      },\n    },\n  };\n\n  const getData = async () => {\n    const {data} = await simpleRestProvider.custom!({\n      url: configs.apiUrl + `/weekly/vikoba/contributions/analytics`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n    console.log(data);\n    if (data) {\n      setAnalytics(data.data);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  return (\n    <>\n      {/* <Column {...config} /> */}\n    </>\n  );\n};\n","import {useActiveAuthProvider, useGetIdentity} from \"@refinedev/core\";\nimport {useEffect, useState} from \"react\";\nimport {WeeklyPaymentsDash} from \"../components/dash/weekly_payments\";\nimport {Card, Col, Grid, Row, Statistic} from \"antd\";\nimport simpleRestProvider from \"../../api\";\nimport configs from \"../../configs\";\nimport {RegionData} from \"../../interfaces\";\nimport {WeeklyVikobaTransactionsDash} from \"../components/dash/vikoba_transactions\";\n\ninterface AnalyticsData {\n  totalUsers: number;\n  totalVikoba: number;\n  totalVikobaMembers: number;\n  totalDonations: number;\n}\n\ninterface Props {}\n\nexport const ControlHome: React.FC<Props> = (props: Props) => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [analytics, setAnalytics] = useState<AnalyticsData>({\n    totalUsers: 0,\n    totalVikoba: 0,\n    totalVikobaMembers: 0,\n    totalDonations: 0,\n  });\n\n  const authProvider = useActiveAuthProvider();\n  const {data: user} = useGetIdentity({\n    v3LegacyAuthProviderCompatible: Boolean(authProvider?.isLegacy),\n  });\n\n  const breakpoint = Grid.useBreakpoint();\n  const isMobile =\n    typeof breakpoint.lg === \"undefined\" ? false : !breakpoint.lg;\n\n  const getAnalytics = async () => {\n    setLoading(true);\n    const {data} = await simpleRestProvider.custom!<RegionData | any>({\n      url: configs.apiUrl + `/dashboard/analytics`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n    if (data) {\n      setAnalytics(data.data);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if ((user?.isAdmin || user?.isStaff) === false) {\n      window.location.href = \"/\";\n    }\n    getAnalytics();\n  }, []);\n\n  return (\n    <>\n      <Row>\n        <Col span={isMobile ? 12 : 4}>\n          <Card bordered={false} size=\"small\">\n            <Statistic\n              title=\"Total Users\"\n              loading={loading}\n              value={analytics.totalUsers}\n              precision={0}\n              valueStyle={{color: \"#3f8600\"}}\n            />\n          </Card>\n        </Col>\n        <Col span={isMobile ? 12 : 4}>\n          <Card bordered={false} size=\"small\">\n            <Statistic\n              title=\"Total Vikoba\"\n              loading={loading}\n              value={analytics.totalVikoba}\n              precision={0}\n              valueStyle={{color: \"#3f8600\"}}\n            />\n          </Card>\n        </Col>\n\n        <Col span={isMobile ? 12 : 4}>\n          <Card bordered={false} size=\"small\">\n            <Statistic\n              title=\"Total Vikoba Members\"\n              loading={loading}\n              value={analytics.totalVikobaMembers}\n              precision={0}\n              valueStyle={{color: \"#3f8600\"}}\n            />\n          </Card>\n        </Col>\n\n        <Col span={isMobile ? 12 : 4}>\n          <Card bordered={false} size=\"small\">\n            <Statistic\n              title=\"Total Donations\"\n              loading={loading}\n              value={analytics.totalDonations}\n              precision={0}\n              valueStyle={{color: \"#3f8600\"}}\n            />\n          </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col span={isMobile ? 24 : 12} style={{marginTop: 5}}>\n          <Card title=\"Weekly Service Payments\">\n            <WeeklyPaymentsDash />\n          </Card>\n        </Col>\n        <Col span={isMobile ? 24 : 12} style={{marginTop: 5}}>\n          <Card title=\"Weekly Vikoba Payments Collections\">\n            <WeeklyVikobaTransactionsDash />\n          </Card>\n        </Col>\n      </Row>\n    </>\n  );\n};\n"],"names":["WeeklyPaymentsDash","props","_useState","useState","_useState2","_slicedToArray","setAnalytics","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$then$catch","data","wrap","_context","prev","next","simpleRestProvider","custom","url","configs","apiUrl","method","then","res","catch","error","sent","console","log","stop","apply","arguments","useEffect","_jsx","_Fragment","WeeklyVikobaTransactionsDash","ControlHome","loading","setLoading","_useState3","totalUsers","totalVikoba","totalVikobaMembers","totalDonations","_useState4","analytics","authProvider","useActiveAuthProvider","user","useGetIdentity","v3LegacyAuthProviderCompatible","Boolean","isLegacy","breakpoint","Grid","useBreakpoint","isMobile","lg","getAnalytics","isAdmin","isStaff","window","location","href","_jsxs","children","Row","Col","span","Card","bordered","size","Statistic","title","value","precision","valueStyle","color","style","marginTop"],"sourceRoot":""}