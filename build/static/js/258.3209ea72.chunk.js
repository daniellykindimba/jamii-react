"use strict";(self.webpackChunkJamii=self.webpackChunkJamii||[]).push([[258],{80258:function(e,n,t){t.r(n),t.d(n,{ControlMembers:function(){return F}});var a=t(74165),r=t(15861),i=t(29439),s=t(72791),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},o=t(12764),l=function(e,n){return s.createElement(o.Z,Object.assign({},e,{ref:n,icon:c}))};l.displayName="KeyOutlined";var u=s.forwardRef(l),d=t(40589),m=t(68886),f=t(43110),h=t(48490),x=t(91082),p=t(87309),g=t(46988),Z=t(66106),j=t(30914),v=t(44322),y=t(38590),k=t(6343),w=t(31425),S=t(80184),F=function(e){var n=(0,s.useState)(!1),t=(0,i.Z)(n,2),c=(t[0],t[1]),o=(0,s.useState)(0),l=(0,i.Z)(o,2),F=l[0],C=l[1],N=(0,s.useState)(20),P=(0,i.Z)(N,2),b=P[0],I=P[1],A=(0,s.useState)(1),z=(0,i.Z)(A,2),R=z[0],U=z[1],B=(0,s.useState)([]),E=(0,i.Z)(B,2),L=E[0],M=E[1],T=(0,m.RU)(),J=(0,m.kS)({v3LegacyAuthProviderCompatible:Boolean(null===T||void 0===T?void 0:T.isLegacy)}).data,O=!f.ZP.useBreakpoint().lg,q=h.Z.useForm(),K=(0,i.Z)(q,1)[0],Y=[{title:"First Name",dataIndex:"name",key:"name",fixed:!0,render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("span",{children:n.firstName})})}},{title:"Middle Name",dataIndex:"name",key:"name",render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("span",{children:n.middleName})})}},{title:"Last Name",dataIndex:"name",key:"name",render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("span",{children:n.lastName})})}},{title:"Phone Number",dataIndex:"age",key:"age",render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("span",{children:n.phone})})}},{title:"Email Address",dataIndex:"address",key:"address",render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("span",{children:n.email})})}},{title:(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{style:{float:"right"},children:"Action(s)"})}),dataIndex:"actions",key:"actions",render:function(e,n,t){return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(x.Z,{title:"Reset User Password",description:"Are you sure to reset user Password?",onConfirm:function(){return G(n.id)},onCancel:function(){},okText:"Yes",cancelText:"No",children:(0,S.jsx)(p.ZP,{icon:(0,S.jsx)(u,{}),style:{float:"right"}})})})}}],D=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t,r,i,s,o=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:25,c(!0),e.next=5,k.Z.custom({url:w.Z.apiUrl+"/users?page=".concat(n,"&limit=").concat(r,"&q=").concat(t),method:"get"}).then((function(e){return e})).catch((function(e){return{data:null}}));case 5:i=e.sent,(s=i.data)&&(C(s.pagination.total),U(s.pagination.page),I(s.pagination.limit),M(s.data)),c(!1);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.Z.custom({url:w.Z.apiUrl+"/user/".concat(n,"/password/reset"),method:"get"}).then((function(e){return e})).catch((function(e){return{data:null}}));case 2:t=e.sent,t.data&&g.ZP.success("Password Reset Successful");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){!1===((null===J||void 0===J?void 0:J.isAdmin)||(null===J||void 0===J?void 0:J.isStaff))&&(window.location.href="/"),D(1)}),[]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Z.Z,{style:{marginTop:10},children:(0,S.jsx)(j.Z,{span:O?24:12,children:(0,S.jsx)(h.Z,{layout:"vertical",form:K,onFinish:function(e){D(1,e.key)},children:(0,S.jsx)(h.Z.Item,{name:"key",children:(0,S.jsx)(v.Z,{size:"large",placeholder:"Search ...",prefix:(0,S.jsx)(d.Z,{}),autoComplete:"off",allowClear:!0})})})})}),(0,S.jsx)("div",{children:(0,S.jsx)(y.Z,{size:"small",dataSource:L,columns:Y,scroll:{x:!0},pagination:{total:F,pageSize:b,current:R}})})]})}}}]);
//# sourceMappingURL=258.3209ea72.chunk.js.map