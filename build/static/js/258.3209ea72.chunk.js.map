{"version":3,"file":"static/js/258.3209ea72.chunk.js","mappings":"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","sources":["../node_modules/@ant-design/icons-svg/es/asn/KeyOutlined.js","../node_modules/@ant-design/icons/es/icons/KeyOutlined.js","control/pages/members.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar KeyOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z\" } }] }, \"name\": \"key\", \"theme\": \"outlined\" };\nexport default KeyOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport KeyOutlinedSvg from \"@ant-design/icons-svg/es/asn/KeyOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar KeyOutlined = function KeyOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: KeyOutlinedSvg\n  }));\n};\n\nKeyOutlined.displayName = 'KeyOutlined';\nexport default /*#__PURE__*/React.forwardRef(KeyOutlined);","import {KeyOutlined, SearchOutlined} from \"@ant-design/icons\";\nimport {useActiveAuthProvider, useGetIdentity} from \"@refinedev/core\";\nimport {\n  Button,\n  Col,\n  Form,\n  Grid,\n  Input,\n  Popconfirm,\n  Row,\n  Table,\n  message,\n} from \"antd\";\nimport {useEffect, useState} from \"react\";\nimport simpleRestProvider from \"../../api\";\nimport configs from \"../../configs\";\nimport {RegionData, UserData} from \"../../interfaces\";\n\ninterface searchFormData {\n  key: string;\n}\n\ninterface Props {}\n\nexport const ControlMembers: React.FC<Props> = (props: Props) => {\n  const [loading, setLoading] = useState(false);\n  const [total, setTotal] = useState(0);\n  const [limit, setLimit] = useState(20);\n  const [page, setPage] = useState(1);\n  const [members, setMembers] = useState<UserData[]>([]);\n  const authProvider = useActiveAuthProvider();\n  const {data: user} = useGetIdentity({\n    v3LegacyAuthProviderCompatible: Boolean(authProvider?.isLegacy),\n  });\n  const breakpoint = Grid.useBreakpoint();\n  const isMobile = !breakpoint.lg;\n\n  const [searchForm] = Form.useForm<searchFormData>();\n\n  const columns = [\n    {\n      title: \"First Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      fixed: true,\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.firstName}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Middle Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.middleName}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Last Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.lastName}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Phone Number\",\n      dataIndex: \"age\",\n      key: \"age\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.phone}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Email Address\",\n      dataIndex: \"address\",\n      key: \"address\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.email}</span>\n        </>\n      ),\n    },\n    {\n      title: (\n        <>\n          <div style={{float: \"right\"}}>Action(s)</div>\n        </>\n      ),\n      dataIndex: \"actions\",\n      key: \"actions\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <Popconfirm\n            title=\"Reset User Password\"\n            description=\"Are you sure to reset user Password?\"\n            onConfirm={() => resetPassword(row.id)}\n            onCancel={() => {}}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Button icon={<KeyOutlined />} style={{float: \"right\"}}></Button>\n          </Popconfirm>\n        </>\n      ),\n    },\n  ];\n\n  const getMembers = async (\n    start: number,\n    key: string = \"\",\n    limit: number = 25\n  ) => {\n    setLoading(true);\n    const {data} = await simpleRestProvider.custom!<RegionData | any>({\n      url: configs.apiUrl + `/users?page=${start}&limit=${limit}&q=${key}`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n\n    if (data) {\n      setTotal(data.pagination.total);\n      setPage(data.pagination.page);\n      setLimit(data.pagination.limit);\n      setMembers(data.data);\n    }\n    setLoading(false);\n  };\n\n  const resetPassword = async (user_id: number) => {\n    const {data} = await simpleRestProvider.custom!<RegionData | any>({\n      url: configs.apiUrl + `/user/${user_id}/password/reset`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n\n    if (data) {\n      message.success(\"Password Reset Successful\");\n    }\n  };\n\n  useEffect(() => {\n    if ((user?.isAdmin || user?.isStaff) === false) {\n      window.location.href = \"/\";\n    }\n\n    getMembers(1);\n  }, []);\n\n  return (\n    <>\n      <Row style={{marginTop: 10}}>\n        <Col span={isMobile ? 24 : 12}>\n          <Form<searchFormData>\n            layout=\"vertical\"\n            form={searchForm}\n            onFinish={(values) => {\n              getMembers(1, values.key);\n            }}\n          >\n            <Form.Item name=\"key\">\n              <Input\n                size=\"large\"\n                placeholder=\"Search ...\"\n                prefix={<SearchOutlined />}\n                autoComplete=\"off\"\n                allowClear\n              />\n            </Form.Item>\n          </Form>\n        </Col>\n      </Row>\n      <div>\n        <Table\n          size=\"small\"\n          dataSource={members}\n          columns={columns}\n          scroll={{x: true}}\n          pagination={{\n            total: total,\n            pageSize: limit,\n            current: page,\n          }}\n        />\n      </div>\n    </>\n  );\n};\n"],"names":["KeyOutlined","props","ref","React","AntdIcon","Object","assign","icon","KeyOutlinedSvg","displayName","ControlMembers","_useState","useState","_useState2","_slicedToArray","setLoading","_useState3","_useState4","total","setTotal","_useState5","_useState6","limit","setLimit","_useState7","_useState8","page","setPage","_useState9","_useState10","members","setMembers","authProvider","useActiveAuthProvider","user","useGetIdentity","v3LegacyAuthProviderCompatible","Boolean","isLegacy","data","isMobile","Grid","useBreakpoint","lg","_Form$useForm","Form","useForm","searchForm","columns","title","dataIndex","key","fixed","render","text","row","index","_jsx","_Fragment","children","firstName","middleName","lastName","phone","email","style","float","Popconfirm","description","onConfirm","resetPassword","id","onCancel","okText","cancelText","Button","getMembers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","start","_yield$then$catch","_args","arguments","wrap","_context","prev","next","length","undefined","simpleRestProvider","custom","url","configs","apiUrl","concat","method","then","res","catch","error","sent","pagination","stop","_x","apply","_ref2","_callee2","user_id","_yield$then$catch2","_context2","message","success","_x2","useEffect","isAdmin","isStaff","window","location","href","_jsxs","Row","marginTop","Col","span","layout","form","onFinish","values","Item","name","Input","size","placeholder","prefix","SearchOutlined","autoComplete","allowClear","Table","dataSource","scroll","x","pageSize","current"],"sourceRoot":""}