"use strict";(self.webpackChunkJamii=self.webpackChunkJamii||[]).push([[431],{97431:function(e,n,t){t.r(n),t.d(n,{ControlRole:function(){return w}});var r=t(74165),a=t(15861),s=t(29439),i=t(82622),c=t(17747),o=t(40589),u=t(14057),l=t(68886),d=t(48490),f=t(43110),Z=t(46988),h=t(91082),p=t(87309),x=t(66106),m=t(30914),v=t(44322),g=t(38590),j=t(72791),y=t(39529),C=t(6343),S=t(31425),k=t(80184),w=function(e){var n=(0,l.RU)(),t=(0,l.kS)({v3LegacyAuthProviderCompatible:Boolean(null===n||void 0===n?void 0:n.isLegacy)}).data,w=(0,j.useState)(),P=(0,s.Z)(w,2),A=(P[0],P[1]),I=(0,j.useState)([]),b=(0,s.Z)(I,2),F=b[0],z=b[1],J=(0,j.useState)(1),U=(0,s.Z)(J,2),R=U[0],T=U[1],B=(0,j.useState)(0),L=(0,s.Z)(B,2),N=L[0],q=L[1],D=(0,j.useState)(20),E=(0,s.Z)(D,2),H=E[0],Q=E[1],Y=(0,j.useState)(""),G=(0,s.Z)(Y,2),K=G[0],M=(G[1],(0,j.useState)(!1)),O=(0,s.Z)(M,2),V=(O[0],O[1],(0,j.useState)(!0)),W=(0,s.Z)(V,2),X=W[0],$=W[1],_=((0,l.HJ)().push,d.Z.useForm()),ee=(0,s.Z)(_,1)[0],ne=d.Z.useForm(),te=((0,s.Z)(ne,1)[0],!f.ZP.useBreakpoint().lg),re=(0,j.useState)(!1),ae=(0,s.Z)(re,2),se=(ae[0],ae[1]),ie=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.custom({url:S.Z.apiUrl+"/sync/roles",method:"get"});case 2:n=e.sent,(t=n.data).success?Z.ZP.success(t.message):Z.ZP.error(t.message);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.Z.custom({url:S.Z.apiUrl+"/region/delete/"+n,method:"get"}).then((function(e){return e.data.success?e.data:(Z.ZP.error(e.data.message),{data:{success:!1}})})).catch((function(e){return Z.ZP.error(e.message),{data:{success:!1}}}));case 2:t=e.sent,t.data.success&&le(R,K,H);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),oe=function(){Z.ZP.info("Canceled")},ue=[{title:"Name",dataIndex:"name",render:function(e,n,t){return(0,k.jsx)("span",{children:(0,k.jsx)("a",{children:n.name})})}},{title:"Created",dataIndex:"created",render:function(e,n,t){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("span",{children:(0,k.jsx)(y.Z,{date:new Date(n.createdAt)})})})}},{title:"Status",dataIndex:"isActive",render:function(e,n,t){return(0,k.jsx)("a",{children:null!==n&&void 0!==n&&n.isActive?(0,k.jsx)("span",{style:{color:"green"},children:"Active"}):(0,k.jsx)("span",{style:{color:"red"},children:"Inactive"})})}},{title:"",dataIndex:"action",render:function(e,n,t){return(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(0,k.jsx)(h.Z,{title:"Are you sure to delete this member?",onConfirm:function(){return ce(null===n||void 0===n?void 0:n.id)},onCancel:function(){return oe},okText:"Yes",cancelText:"No",children:(0,k.jsx)(p.ZP,{icon:(0,k.jsx)(i.Z,{})})}),(0,k.jsx)(p.ZP,{onClick:function(){return function(e){A(e),se(!0)}(n)},icon:(0,k.jsx)(c.Z,{})})]})}}],le=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(n){var t,a,s,i,c=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:"",a=c.length>2&&void 0!==c[2]?c[2]:25,$(!0),e.next=5,C.Z.custom({url:S.Z.apiUrl+"/roles?page=".concat(n,"&limit=").concat(a,"&q=").concat(t),method:"get"}).then((function(e){return e})).catch((function(e){return{data:null}}));case 5:s=e.sent,(i=s.data)&&(q(i.pagination.total),T(i.pagination.page),Q(i.pagination.limit),z(i.data)),$(!1);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,j.useEffect)((function(){!1===((null===t||void 0===t?void 0:t.isAdmin)||(null===t||void 0===t?void 0:t.isStaff))&&(window.location.href="/"),le(R,"",25)}),[]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(x.Z,{style:{marginTop:10},children:[(0,k.jsx)(m.Z,{span:te?24:20,children:(0,k.jsx)(d.Z,{layout:"vertical",form:ee,onFinish:function(e){T(1),F.length=0,le(1,e.key,H)},children:(0,k.jsx)(d.Z.Item,{name:"key",children:(0,k.jsx)(v.Z,{size:"large",placeholder:"Search ...",prefix:(0,k.jsx)(o.Z,{}),autoComplete:"off",allowClear:!0})})})}),(0,k.jsx)(m.Z,{span:te?24:4,style:{display:"flex",justifyContent:"flex-end"},children:(0,k.jsx)(p.ZP,{size:"large",icon:(0,k.jsx)(u.Z,{}),onClick:function(){return ie()},children:"Sync Roles"})})]}),(0,k.jsx)("div",{children:(0,k.jsx)(g.Z,{size:"small",loading:X,columns:ue,dataSource:F,scroll:{x:!0},pagination:{onChange:function(e,n){Q(n),le(e,K,n)},total:N,pageSize:H,position:["bottomCenter"],showQuickJumper:!0}})})]})}}}]);
//# sourceMappingURL=431.572628da.chunk.js.map