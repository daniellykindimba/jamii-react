{"version":3,"file":"static/js/821.817fb433.chunk.js","mappings":"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","sources":["control/pages/vikoba.tsx"],"sourcesContent":["import {SearchOutlined} from \"@ant-design/icons\";\nimport {useActiveAuthProvider, useGetIdentity} from \"@refinedev/core\";\nimport {Button, Col, Form, Grid, Input, Modal, Row, Table} from \"antd\";\nimport {useEffect, useState} from \"react\";\nimport simpleRestProvider from \"../../api\";\nimport configs from \"../../configs\";\nimport {KikobaData, RegionData} from \"../../interfaces\";\nimport {get} from \"http\";\nimport moment from \"moment\";\n\ninterface Props {}\n\ninterface searchFormData {\n  key: string;\n}\n\nexport const ControlVikoba: React.FC<Props> = (props: Props) => {\n  const [vikobas, setVikobas] = useState<KikobaData[]>([]);\n  const [kikoba, setKikoba] = useState<KikobaData>();\n  const [total, setTotal] = useState(0);\n  const [limit, setLimit] = useState(25);\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(true);\n  const [kikobaModal, setKikobaModal] = useState(false);\n  const [searchForm] = Form.useForm<searchFormData>();\n  const authProvider = useActiveAuthProvider();\n  const {data: user} = useGetIdentity({\n    v3LegacyAuthProviderCompatible: Boolean(authProvider?.isLegacy),\n  });\n  const breakpoint = Grid.useBreakpoint();\n  const isMobile = !breakpoint.lg;\n\n  const handleKikobaModal = (kikoba: KikobaData) => {\n    setKikoba(kikoba);\n    setKikobaModal(true);\n  };\n\n  const columns = [\n    {\n      title: \"Name\",\n      dataIndex: \"name\",\n      key: \"name\",\n      fixed: true,\n    },\n    {\n      title: \"Kikoba #\",\n      dataIndex: \"kikobaNumber\",\n      key: \"kikobaNumber\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.registrationNumber}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Members\",\n      dataIndex: \"totalMembers\",\n      key: \"totalMembers\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>{row.totalMembers}</span>\n        </>\n      ),\n    },\n    {\n      title: \"Region/District\",\n      dataIndex: \"region\",\n      key: \"region\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>\n            {row.region.name}/{row.district.name}\n          </span>\n        </>\n      ),\n    },\n    {\n      title: \"start Date - End Date\",\n      dataIndex: \"region\",\n      key: \"region\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <span>\n            {moment(row.startDate).format(\"MM/DD/YYYY\")} -{\" \"}\n            {moment(row.endDate).format(\"MM/DD/YYY\")}\n          </span>\n        </>\n      ),\n    },\n    {\n      title: \"\",\n      dataIndex: \"actions\",\n      key: \"actions\",\n      render: (text: any, row: any, index: any) => (\n        <>\n          <Button\n            type=\"primary\"\n            size=\"small\"\n            onClick={() => {\n              handleKikobaModal(row);\n            }}\n            style={{float: \"right\"}}\n          >\n            View\n          </Button>\n        </>\n      ),\n    },\n  ];\n\n  const getVikobas = async (\n    start: number,\n    key: string = \"\",\n    limit: number = 25\n  ) => {\n    setLoading(true);\n    const {data} = await simpleRestProvider.custom!<RegionData | any>({\n      url:\n        configs.apiUrl + `/kikobas/all?page=${start}&limit=${limit}&q=${key}`,\n      method: \"get\",\n    })\n      .then((res) => {\n        return res;\n      })\n      .catch((error) => {\n        return {data: null};\n      });\n\n    if (data) {\n      setTotal(data.pagination.total);\n      setPage(data.pagination.page);\n      setLimit(data.pagination.limit);\n      setVikobas(data.data);\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if ((user?.isAdmin || user?.isStaff) === false) {\n      window.location.href = \"/\";\n    }\n    getVikobas(1);\n  }, []);\n\n  return (\n    <>\n      <Row style={{marginTop: 10}}>\n        <Col span={isMobile ? 24 : 12}>\n          <Form<searchFormData>\n            layout=\"vertical\"\n            form={searchForm}\n            onFinish={(values) => {}}\n          >\n            <Form.Item name=\"key\">\n              <Input\n                size=\"large\"\n                placeholder=\"Search ...\"\n                prefix={<SearchOutlined />}\n                autoComplete=\"off\"\n                allowClear\n              />\n            </Form.Item>\n          </Form>\n        </Col>\n      </Row>\n      <Table\n        size=\"small\"\n        dataSource={vikobas}\n        columns={columns}\n        scroll={{x: true}}\n        pagination={{\n          total: total,\n          pageSize: limit,\n          current: page,\n        }}\n      />\n\n      <Modal\n        title={kikoba?.name + \" - \" + kikoba?.registrationNumber + \" Details\"}\n        width={\"90vw\"}\n        open={kikobaModal}\n        onOk={() => {\n          setKikobaModal(false);\n        }}\n        onCancel={() => {\n          setKikobaModal(false);\n        }}\n        footer={[]}\n      >\n        <p>Some contents...</p>\n        <p>Some contents...</p>\n        <p>Some contents...</p>\n      </Modal>\n    </>\n  );\n};\n"],"names":["ControlVikoba","props","_useState","useState","_useState2","_slicedToArray","vikobas","setVikobas","_useState3","_useState4","kikoba","setKikoba","_useState5","_useState6","total","setTotal","_useState7","_useState8","limit","setLimit","_useState9","_useState10","page","setPage","_useState11","_useState12","setLoading","_useState13","_useState14","kikobaModal","setKikobaModal","_Form$useForm","Form","useForm","searchForm","authProvider","useActiveAuthProvider","user","useGetIdentity","v3LegacyAuthProviderCompatible","Boolean","isLegacy","data","isMobile","Grid","useBreakpoint","lg","columns","title","dataIndex","key","fixed","render","text","row","index","_jsx","_Fragment","children","registrationNumber","totalMembers","_jsxs","region","name","district","moment","startDate","format","endDate","Button","type","size","onClick","handleKikobaModal","style","float","getVikobas","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","start","_yield$then$catch","_args","arguments","wrap","_context","prev","next","length","undefined","simpleRestProvider","custom","url","configs","apiUrl","concat","method","then","res","catch","error","sent","pagination","stop","_x","apply","useEffect","isAdmin","isStaff","window","location","href","Row","marginTop","Col","span","layout","form","onFinish","values","Item","Input","placeholder","prefix","SearchOutlined","autoComplete","allowClear","Table","dataSource","scroll","x","pageSize","current","Modal","width","open","onOk","onCancel","footer"],"sourceRoot":""}